<% include ./partials/header %>
<% include ./partials/backgroundPic %>

<h1>Search Results</h1>

<% if(campgrounds.length > 0) { %>
<h2 class="searchListCategory">Campgrounds</h2>
  <div class="list-group">
    <% campgrounds.forEach(function(campground) { %>
      <a href="/campgrounds/<%= campground._id %>" class="list-group-item searchList textLink">
        <img class="search-thumbnail list-inline-item" src="<%= campground.image %>" alt="nada">
        <h6 class="list-inline-item"><%= campground.name %></h6>
      </a>
    <% }); %>
  </div>
<% } %>

<% if(users.length > 0) { %>
<h2 class="searchListCategory">Usernames</h2>
  <div class="list-group">
    <% users.forEach(function(user) { %>
      <a href="/users/<%= user._id %>" class="list-group-item searchList textLink">
        <img class="search-thumbnail rounded-circle list-inline-item" src="<%= user.avatar %>" alt="nada">
        <h6 class="list-inline-item"><%= user.username %></h6><br>
      </a>
    <% }); %>
  </div>
<% } %>

<div class="form-group row float-sm-left campUserCluster">
  <div class="btn-group col-12">
    <a class="btn btn-block btn-info" href="/campgrounds"><i class="fas fa-sign"></i> Campgrounds</a>
    <a class="btn btn-primary" href="/users"><i class="fas fa-users"></i></a>
  </div>
</div>

<!-- navigate search results -->
<nav class="paginate">
  <% if (pages && pages > 0) { %>
    <ul class="pagination pagination-sm justify-content-center">
      <!-- for first page -->
      <% if (current == 1) { %>
        <li class="disabled page-item"><a class="page-link"><i class="fas fa-angle-double-left"></i></a></li>
      <% } else { %>
        <li class="page-item"><a class="page-link" href="/searchResults<%if(search){%>?search=<%=search%><%}%>"><i class="fas fa-angle-double-left"></i></a></li>
      <% } %>

      <!-- go to previous page -->
      <% if (current == 1) { %>
        <li class="disabled page-item"><a class="page-link"><i class="fas fa-angle-left"></i></a></li>
      <% } else { %>
        <li class="page-item"><a class="page-link" href="/searchResults?page=<%= Number(current) - 1 %><%if(search){%>&search=<%=search%><%}%>"><i class="fas fa-angle-left"></i></a></li>
      <% } %>

      <!-- go to specific page -->
      <% let i = (Number(current) > 4 ? Number(current) - 3 : 1) %>
      <% if (i !== 1) { %>
        <li class="disabled page-item"><a class="page-link navNoBorder"><i class="fas fa-ellipsis-h"></i></a></li>
      <% } %>
      <% for (; i <= (Number(current) + 3) && i <= pages; i++) { %>
        <% if (i == current) { %>
          <li class="page-item active"><a class="page-link" id="activePage"><%= i %></a></li>
        <% } else { %>
          <li class="page-item"><a class="page-link navNoBorder" href="/searchResults?page=<%= i %><%if(search){%>&search=<%=search%><%}%>"><%= i %></a></li>
        <% } %>
        <% if (i == Number(current) + 3 && i < pages) { %>
          <li class="disabled page-item"><a class="page-link navNoBorder"><i class="fas fa-ellipsis-h"></i></a></li>
        <% } %>
      <% } %>

      <!-- go to next page -->
      <% if (current == pages) { %>
        <li class="disabled page-item"><a class="page-link navNoBorder"><i class="fas fa-angle-right"></i></a></li>
      <% } else { %>
        <li class="page-item"><a class="page-link navNoBorder" href="/searchResults?page=<%= Number(current) + 1 %><%if(search){%>&search=<%=search%><%}%>"><i class="fas fa-angle-right"></i></a></li>
      <% } %>

      <!-- go to last page -->
      <% if (current == pages) { %>
        <li class="disabled page-item"><a class="page-link"><i class="fas fa-angle-double-right"></i></a></li>
      <% } else { %>
        <li class="page-item"><a class="page-link" href="/searchResults?page=<%= pages %><%if(search){%>&search=<%=search%><%}%>"><i class="fas fa-angle-double-right"></i></a></li>
      <% } %>
    </ul>
  <% } %>
</nav>

<% include ./partials/footer %>